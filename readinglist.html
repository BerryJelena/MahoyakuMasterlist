<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Collection Tracker</title>
    <!-- Load Tailwind CSS for easy styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* ====================================================================
           CUSTOM STYLES: This section defines the appearance of the collection cards.
           ==================================================================== */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f5f4fa; /* Controls the background color of the whole page */
        }

        /* The base style for a collection item */
        .collection-item {
            transition: all 0.2s ease-in-out;
            cursor: pointer;
            border: 2px solid #e5e7eb; /* Light gray border for unselected state */
            user-select: none;
            /* Ensures minimum size for visual balance, but allows vertical growth for long names */
            min-height: 8rem; 
        }

        /* The style for a SELECTED collection item (changes color, border, and adds shadow) */
        .selected {
            border-color: #10b981; /* Collected border color (Emerald Green) */
            background-color: #ecfdf5; /* Collected background color */
            box-shadow: 0 4px 6px -1px rgba(16, 185, 129, 0.3), 0 2px 4px -2px rgba(16, 185, 129, 0.3);
            transform: translateY(-2px); /* Slight lift animation */
        }
        
        /* A subtle hover effect for unselected items */
        .collection-item:hover:not(.selected) {
            border-color: #a7f3d0; /* Lighter border on hover */
        }
    </style>
</head>
<body class="p-4 sm:p-8">

    <!-- ====================================================================
         SECTION 1: HEADER & CONTROL PANEL (Visible at the top of the page)
         ==================================================================== -->
    <header class="mb-8 text-center">
        <!-- Change this text to customize the title of your collection -->
        <h1 class="text-4xl font-extrabold text-gray-900 mb-2">My Awesome Collection</h1>
        <p class="text-lg text-gray-600">Click an item to mark it as collected. Your progress saves automatically!</p>
        
        <!-- Progress Tracker Section -->
        <div class="mt-6 p-4 max-w-lg mx-auto bg-white rounded-xl shadow-lg border border-gray-100">
            <div class="flex justify-between items-center mb-2">
                <!-- Progress Percentage Text (Updated by JS) -->
                <span class="text-xl font-bold text-gray-700">Progress: <span id="progressPercentage" class="text-emerald-600">0%</span></span>
                <!-- Collected Count / Total Count (Updated by JS) -->
                <span class="text-lg font-medium text-gray-500">
                    <span id="collectedCount">0</span> / <span id="totalCount">0</span> Collected
                </span>
            </div>
            
            <!-- Progress Bar Visualization (Updated by JS width style) -->
            <div class="w-full bg-gray-200 rounded-full h-3">
                <div id="progressBar" class="bg-emerald-500 h-3 rounded-full transition-all duration-500 ease-out" style="width: 0%"></div>
            </div>
        </div>

        <!-- The Reset Button -->
        <button id="resetButton" class="mt-4 px-4 py-2 bg-red-500 text-white font-semibold rounded-lg shadow-md hover:bg-red-600 transition duration-150">
            Reset All
        </button>
    </header>

    <!-- ====================================================================
         SECTION 2: MAIN COLLECTION GRID (Where the item boxes appear)
         ==================================================================== -->
    <main id="collectionContainer" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4 max-w-6xl mx-auto">
        <!-- Collection items will be generated here by JavaScript -->
    </main>

    <!-- ====================================================================
         SECTION 3: SUCCESS MESSAGE (The small floating alert/toast)
         ==================================================================== -->
    <div id="messageBox" class="fixed top-4 right-4 bg-emerald-500 text-white px-6 py-3 rounded-xl shadow-lg transform translate-x-full transition-transform duration-300" role="alert">
        <span id="messageText"></span>
    </div>

    <!-- ====================================================================
         JAVASCRIPT LOGIC: Controls all functionality and dynamic updates
         ==================================================================== -->
    <script>
        // --- 1. SETUP & DATA REFERENCES ---
        
        // This key is used to save and load data in your browser's local storage.
        const COLLECTION_ITEMS_KEY = 'myCollectionItems'; 
        
        // References to the main HTML elements by their IDs
        const collectionContainer = document.getElementById('collectionContainer');
        const resetButton = document.getElementById('resetButton');
        const messageBox = document.getElementById('messageBox');
        const messageText = document.getElementById('messageText');

        // References for the Progress Tracker elements
        const collectedCountSpan = document.getElementById('collectedCount');
        const totalCountSpan = document.getElementById('totalCount');
        const progressPercentageSpan = document.getElementById('progressPercentage');
        const progressBarDiv = document.getElementById('progressBar');


        // SVG Icons for visual status (Checkmark and Blank Box)
        const CHECKMARK_SVG = `
            <svg class="w-8 h-8 text-emerald-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>`;
            
        const BLANK_BOX_SVG = `
            <svg class="w-8 h-8 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2" stroke-width="2.5"/>
            </svg>`;


        // THE CORE COLLECTION DATA: EDIT THIS ARRAY to change the items in your collection!
        const allItems = [
            { id: 1, name: "The Ancient Coin" },
            { id: 2, name: "The Lost Scroll" },
            { id: 3, name: "Star Dust Sample" },
            { id: 4, name: "Dinosaur Tooth and Fossilized Bone Fragment" }, 
            { id: 5, name: "Miniature Robot" },
            { id: 6, name: "Crystalized Flower" },
            { id: 7, name: "Alien Artifact 7" },
            { id: 8, name: "Magic Potion" },
            { id: 9, name: "Dragon Scale" },
            { id: 10, name: "Vintage Camera" },
            { id: 11, name: "First Edition Book" },
            { id: 12, name: "Hand-Drawn Map" },
            { id: 13, name: "Meteorite Fragment" },
            { id: 14, name: "Secret Key" },
            { id: 15, name: "Golden Statue" },
        ];

        // This array stores the IDs of the items you have currently collected.
        let selectedItemIds = []; 


        // --- 2. PERSISTENCE (LOCAL STORAGE) FUNCTIONS ---

        // Loads the array of collected item IDs from the browser's storage
        function loadItems() {
            try {
                const storedData = localStorage.getItem(COLLECTION_ITEMS_KEY);
                // If data exists, convert it from text back into an array
                if (storedData) {
                    selectedItemIds = JSON.parse(storedData);
                }
            } catch (error) {
                console.error("Could not load items from localStorage:", error);
            }
        }

        // Saves the current array of collected item IDs to the browser's storage
        function saveItems() {
            try {
                // Convert the array to a text string for storage
                localStorage.setItem(COLLECTION_ITEMS_KEY, JSON.stringify(selectedItemIds));
            } catch (error) {
                console.error("Could not save items to localStorage:", error);
            }
        }


        // --- 3. PROGRESS TRACKER & MESSAGING ---

        // Updates the numbers and the visual bar at the top of the page
        function updateTracker() {
            const total = allItems.length;
            const collected = selectedItemIds.length;
            
            // Update the text counts
            collectedCountSpan.textContent = collected;
            totalCountSpan.textContent = total;

            // Calculate percentage
            const percentage = total > 0 ? Math.round((collected / total) * 100) : 0;
            
            // Update percentage text and progress bar width (this controls the bar's fullness)
            progressPercentageSpan.textContent = `${percentage}%`;
            progressBarDiv.style.width = `${percentage}%`;
        }

        // Function to show the small floating success/deselect message
        function showMessage(text) {
            messageText.textContent = text;
            // Slide message in from the right
            messageBox.classList.remove('translate-x-full'); 
            
            // Hide the message box after 3 seconds
            setTimeout(() => {
                // Slide message out to the right
                messageBox.classList.add('translate-x-full');
            }, 3000);
        }


        // --- 4. COLLECTION GRID RENDERING ---

        // Creates the HTML element for a single collection item
        function createItemElement(item) {
            const isSelected = selectedItemIds.includes(item.id);
            
            const itemDiv = document.createElement('div');
            itemDiv.id = `item-${item.id}`; 
            itemDiv.setAttribute('data-id', item.id);
            
            // Apply base styling
            itemDiv.className = 'collection-item p-4 bg-white rounded-xl shadow-sm hover:shadow-md flex flex-col justify-between';
            
            // Apply the 'selected' style if needed
            if (isSelected) {
                itemDiv.classList.add('selected');
            }

            // Inner content, using flex-grow to push the status icon to the bottom
            itemDiv.innerHTML = `
                <div class="flex-grow">
                    <div class="text-2xl mb-2 text-gray-400">#${item.id}</div>
                    <div class="text-xl font-bold text-gray-800">${item.name}</div>
                </div>
                <div class="status-icon mt-2 text-right">
                    ${isSelected ? CHECKMARK_SVG : BLANK_BOX_SVG}
                </div>
            `;
            
            // Attach the click event handler
            itemDiv.addEventListener('click', handleItemClick);
            
            return itemDiv;
        }

        // Renders all items in the `allItems` array to the screen
        function renderItems() {
            collectionContainer.innerHTML = ''; // Clear previous content
            allItems.forEach(item => {
                collectionContainer.appendChild(createItemElement(item));
            });
        }


        // --- 5. INTERACTION LOGIC (What happens when buttons are clicked) ---

        // Runs every time a collection box is clicked
        function handleItemClick(event) {
            const itemDiv = event.currentTarget;
            const itemId = parseInt(itemDiv.getAttribute('data-id'));
            const itemName = allItems.find(i => i.id === itemId)?.name || `Item ${itemId}`;

            const isCurrentlySelected = itemDiv.classList.contains('selected');
            const statusIconContainer = itemDiv.querySelector('.status-icon');

            if (isCurrentlySelected) {
                // DESELECT LOGIC: Remove the ID from the selected list
                selectedItemIds = selectedItemIds.filter(id => id !== itemId);
                itemDiv.classList.remove('selected');
                
                // Update the visual icon
                statusIconContainer.innerHTML = BLANK_BOX_SVG;
                showMessage(`Deselected: ${itemName}`);
            } else {
                // SELECT LOGIC: Add the ID to the selected list
                selectedItemIds.push(itemId);
                itemDiv.classList.add('selected');
                
                // Update the visual icon
                statusIconContainer.innerHTML = CHECKMARK_SVG;
                showMessage(`COLLECTED: ${itemName}!`);
            }
            
            // Critical steps after any click
            saveItems();
            updateTracker(); 
        }

        // Runs when the "Reset All" button is clicked
        function handleReset() {
            // Note: window.confirm is used here as a simple way to ask the user to confirm
            if (!window.confirm("Are you sure you want to reset all collected items? This cannot be undone.")) {
                return;
            }

            // Clear the list of selected IDs
            selectedItemIds = [];
            
            // Update persistence and UI
            saveItems();
            renderItems();
            updateTracker(); 
            
            showMessage("Collection reset successfully!");
        }


        // --- 6. INITIALIZATION (The function that starts the whole app) ---
        
        // This function runs when the browser finishes loading the page content
        window.onload = function() {
            // 1. Load any saved data from the browser (so your progress is maintained)
            loadItems(); 
            
            // 2. Display the collection items on the screen
            renderItems();

            // 3. Set up the reset button to run the reset function
            resetButton.addEventListener('click', handleReset);

            // 4. Calculate and show the initial progress status
            updateTracker(); 
        }

    </script>
</body>
</html>